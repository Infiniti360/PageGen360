(()=>{"use strict";var e={};function t(e){const i=e.tagName.toLowerCase(),n=(e.getAttribute("type"),e.getAttribute("role")),r=e.getAttribute("tabindex"),l=(e.getAttribute("onclick"),e.hasAttribute("onclick")||e.hasAttribute("onclick"));if(["input","button","a","select","textarea","label","img"].includes(i))return!0;if(e.hasAttribute("data-test-id")||e.hasAttribute("data-testid"))return!0;if(e.hasAttribute("aria-label"))return!0;if(n&&["button","link","menuitem","tab","checkbox","radio"].includes(n))return!0;if(r&&"-1"!==r)return!0;if(l)return!0;if(i.includes("-"))return!0;const c=e.getAttribute("class")||"";if(["btn","button","link","clickable","interactive","card","menu","nav","tab"].some(e=>c.includes(e)))return!0;if("img"===i&&(e.closest("a")||l))return!0;if(["div","span","section","article"].includes(i)){const i=e.parentElement;if(i&&t(i))return!0;if(e.querySelector("button, a, input, [data-test-id], [aria-label]"))return!0}return!1}e.d=(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),console.log("Content script loaded on:",window.location.href),chrome.runtime.onMessage.addListener((e,i,n)=>{if(console.log("Content script received message:",e),console.log("Sender:",i),"SCAN_DOM"===e.type){console.log("Starting comprehensive DOM scan...");try{const e=document.querySelectorAll("*");console.log("Total elements found:",e.length);const i={},r=[],l=new Set,c=new Set;e.forEach((e,n)=>{if(!t(e))return;const a=function(e){const t=e.tagName.toLowerCase(),i=e.getAttribute("id"),n=e.getAttribute("data-test-id")||e.getAttribute("data-testid"),r=e.getAttribute("aria-label"),l=e.getAttribute("name"),c=e.getAttribute("class"),a=e.textContent?.trim(),s=(e.getAttribute("type"),e.getAttribute("placeholder")),o=e.getAttribute("title"),d=e.getAttribute("role"),u=e.getAttribute("alt"),p=e.getAttribute("src"),g=e.getAttribute("href");if(n)return{selector:`[data-test-id="${n}"]`,type:"data-test-id",name:n};if(r)return{selector:`[aria-label="${r}"]`,type:"aria-label",name:r.replace(/[^a-zA-Z0-9]/g,"_")};if(i)return{selector:`#${i}`,type:"id",name:i};if(l)return{selector:`[name="${l}"]`,type:"name",name:l};if(s&&"input"===t)return{selector:`[placeholder="${s}"]`,type:"placeholder",name:s.replace(/[^a-zA-Z0-9]/g,"_")};if(o)return{selector:`[title="${o}"]`,type:"title",name:o.replace(/[^a-zA-Z0-9]/g,"_")};if(u&&"img"===t)return{selector:`img[alt="${u}"]`,type:"alt",name:u.replace(/[^a-zA-Z0-9]/g,"_")};if(d)return{selector:`[role="${d}"]`,type:"role",name:d};if(a&&("button"===t||"a"===t)&&a.length<50)return{selector:`${t}:contains("${a}")`,type:"text",name:a.replace(/[^a-zA-Z0-9]/g,"_")};if(c){const e=c.split(" ").filter(e=>e.length>0);if(e.length>0)return{selector:`.${e[0]}`,type:"class",name:e[0]}}if(g&&"a"===t)return{selector:`a[href="${g}"]`,type:"href",name:g.replace(/[^a-zA-Z0-9]/g,"_")};if(p&&"img"===t)return{selector:`img[src="${p}"]`,type:"src",name:p.replace(/[^a-zA-Z0-9]/g,"_")};const b=e.parentElement;if(b){const i=Array.from(b.children).filter(e=>e.tagName===t).indexOf(e)+1;return{selector:`${t}:nth-child(${i})`,type:"nth-child",name:`${t}_${i}`}}return{selector:t,type:"tag",name:t}}(e),s=function(e,t){const i=e.tagName.toLowerCase(),n=e.getAttribute("type"),r=e.textContent?.trim(),l=e.getAttribute("placeholder"),c=e.getAttribute("aria-label"),a=e.getAttribute("name"),s=e.getAttribute("id"),o=e.getAttribute("alt"),d=e.getAttribute("role");let u="";return u=s||("data-test-id"===t.type?t.name:c||l||a||(o&&"img"===i?o:d||(r&&r.length<30&&r.length>0?r:t.name))),u=u.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().replace(/\s+/g,"_"),u&&0!==u.length||(u=`${i}_element`),"input"===i?"checkbox"===n||"radio"===n?`check${u.charAt(0).toUpperCase()+u.slice(1)}`:"submit"===n||"button"===n?`click${u.charAt(0).toUpperCase()+u.slice(1)}`:`enter${u.charAt(0).toUpperCase()+u.slice(1)}`:"button"===i?`click${u.charAt(0).toUpperCase()+u.slice(1)}`:"a"===i?`click${u.charAt(0).toUpperCase()+u.slice(1)}Link`:"select"===i?`select${u.charAt(0).toUpperCase()+u.slice(1)}`:"img"===i?`click${u.charAt(0).toUpperCase()+u.slice(1)}Image`:"div"===i||"span"===i||"section"===i||"article"===i?`click${u.charAt(0).toUpperCase()+u.slice(1)}Element`:`click${u.charAt(0).toUpperCase()+u.slice(1)}`}(e,a);if(l.has(a.selector))return void console.log("Skipping duplicate selector:",a.selector);let o=s,d=1;for(;c.has(o);)o=`${s}_${d}`,d++;const u=`${o}_${n}`,p=function(e){const t=e.tagName.toLowerCase(),i=e.getAttribute("class")||"",n=e.getAttribute("role")||"",r=e.getAttribute("type")||"",l=e.getAttribute("id")||"",c=e.getAttribute("name")||"",a=e.getAttribute("placeholder")||"",s="table"===t||i.includes("table")||i.includes("grid")||i.includes("datatable")||"grid"===n||"table"===n,o="select"===t||i.includes("dropdown")||i.includes("select")||i.includes("combobox")||"combobox"===n||"listbox"===n,d=o&&e.hasAttribute("multiple"),u=i.includes("action")||i.includes("button")||"button"===t||"a"===t,p=s?"tr":void 0,g=s?["button[data-action]","a[data-action]",".action-button",".row-action",'input[type="checkbox"]']:void 0;let b=t;return l?.includes("login")||l?.includes("auth")||i.includes("login")||i.includes("auth")?b="auth":l?.includes("session")||l?.includes("cookie")||i.includes("session")||i.includes("cookie")?b="session":l?.includes("cart")||l?.includes("shop")||l?.includes("product")||i.includes("cart")||i.includes("shop")||i.includes("product")?b="ecommerce":l?.includes("payment")||l?.includes("card")||l?.includes("pay")||i.includes("payment")||i.includes("card")||i.includes("pay")?b="payment":l?.includes("upload")||l?.includes("download")||i.includes("upload")||i.includes("download")?b="fileUpload":l?.includes("export")||l?.includes("import")||i.includes("export")||i.includes("import")?b="export":l?.includes("browser")||l?.includes("os")||i.includes("browser")||i.includes("os")?b="crossBrowser":"password"===r||l?.includes("password")||i.includes("password")?b="password":"file"===r?b="file":"form"===t?b="form":l?.includes("cart")||i.includes("cart")?b="cart":l?.includes("product")||i.includes("product")?b="product":"date"===r||"datetime-local"===r||l?.includes("date")||i.includes("date")||i.includes("calendar")?b="date":"input"!==t||"date"!==r&&"datetime-local"!==r&&"time"!==r?i.includes("calendar")||"grid"===n||"table"===n?b="calendar":"video"===t||i.includes("video")||l?.includes("video")?b="video":"audio"===t||i.includes("audio")||l?.includes("audio")?b="audio":"iframe"===t||i.includes("iframe")||l?.includes("iframe")?b="iframe":i.includes("tab")||"tab"===n||l?.includes("tab")?b="tab":i.includes("popup")||i.includes("modal")||"dialog"===n||l?.includes("popup")||l?.includes("modal")?b="popup":"dialog"===n||i.includes("modal")?b="modal":"tel"===r||l?.includes("phone")||i.includes("phone")||a?.includes("phone")?b="phone":l?.includes("country")||i.includes("country")||c?.includes("country")?b="country":l?.includes("locale")||i.includes("locale")||c?.includes("locale")?b="locale":l?.includes("dateFormat")||i.includes("dateFormat")||c?.includes("dateFormat")?b="dateFormat":l?.includes("gender")||l?.includes("sex")||i.includes("gender")||i.includes("sex")||c?.includes("gender")||c?.includes("sex")?b="gender":"radio"===r||"radio"===n||i.includes("radio")?b="radio":"checkbox"===r||"checkbox"===n||i.includes("checkbox")?b="checkbox":l?.includes("search")||i.includes("search")||"search"===n||"search"===r?b="dynamicSearch":l?.includes("autocomplete")||i.includes("autocomplete")||"combobox"===n?b="autocomplete":l?.includes("map")||i.includes("map")||"map"===t?b="map":"range"===r||i.includes("slider")||"slider"===n?b="slider":i.includes("rating")||"slider"===n||l?.includes("rating")?b="rating":"progress"===t||i.includes("progress")||"progressbar"===n?b="progress":i.includes("spinner")||l?.includes("spinner")?b="spinner":i.includes("accordion")||"region"===n?b="accordion":i.includes("carousel")||i.includes("slider")||"region"===n?b="carousel":i.includes("tabs")||"tablist"===n?b="tabs":i.includes("tooltip")||"tooltip"===n?b="tooltip":i.includes("notification")||"alert"===n?b="notification":i.includes("breadcrumb")||"navigation"===n?b="breadcrumb":i.includes("pagination")||"navigation"===n?b="pagination":i.includes("stepper")||"region"===n?b="stepper":i.includes("wizard")||"region"===n?b="wizard":"div"!==t&&"span"!==t||(b="modern"):b="date",{elementType:b,isTable:s,isDropdown:o,isMultiSelect:d,hasActions:u,rowSelector:p,actionSelectors:g}}(e);i[u]={selector:a.selector,type:a.type,methodName:o,elementType:p.elementType,attributes:{id:e.getAttribute("id"),name:e.getAttribute("name"),type:e.getAttribute("type"),"data-test-id":e.getAttribute("data-test-id"),"aria-label":e.getAttribute("aria-label"),placeholder:e.getAttribute("placeholder"),textContent:e.textContent?.trim(),role:e.getAttribute("role"),alt:e.getAttribute("alt"),src:e.getAttribute("src"),href:e.getAttribute("href"),className:e.getAttribute("class")},isTable:p.isTable,isDropdown:p.isDropdown,isMultiSelect:p.isMultiSelect,hasActions:p.hasActions,rowSelector:p.rowSelector,actionSelectors:p.actionSelectors},r.push({key:u,element:e,selectorInfo:a,methodName:o}),l.add(a.selector),c.add(o)}),console.log("Generated selectors:",i),console.log("Number of interactive elements found:",Object.keys(i).length),n({selectors:i,elementInfo:r,pageTitle:document.title,pageUrl:window.location.href,totalElements:e.length,interactiveElements:Object.keys(i).length})}catch(e){console.error("Error scanning DOM:",e),n({error:e.message})}return!0}console.log("Unknown message type:",e.type),n({error:"Unknown message type"})})})();